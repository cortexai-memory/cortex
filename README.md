<div align="center">

# Cortex

**Persistent memory for AI coding assistants**

Every AI coding tool forgets everything between sessions. Cortex fixes that.

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Tests](https://img.shields.io/github/actions/workflow/status/cortex-memory/cortex/test.yml?label=tests)](https://github.com/cortex-memory/cortex/actions)
[![macOS](https://img.shields.io/badge/macOS-supported-black)](https://www.apple.com/macos/)
[![Linux](https://img.shields.io/badge/Linux-supported-orange)](https://www.linux.org/)

[Install](#install) · [How It Works](#how-it-works) · [Usage](#usage) · [Config](#configuration) · [FAQ](#faq)

</div>

---

## The Problem

Every AI coding assistant — Claude Code, Cursor, Copilot, Aider — starts each session with **zero memory** of what happened before. You waste 10-15 minutes re-explaining your project, your conventions, and where you left off. Every. Single. Session.

## The Fix

Cortex watches your git commits and auto-generates a `SESSION_CONTEXT.md` that your AI reads at session start. It knows what you did yesterday, what broke, and what's next.

```
git commit → hook captures metadata → cx generates context → AI reads it
```

**No daemons. No databases. No LLMs required. Just bash + git + jq.**

## Install

```bash
git clone https://github.com/cortex-memory/cortex.git
cd cortex && ./install.sh
source ~/.zshrc
```

Or if you prefer one command:

```bash
curl -fsSL https://raw.githubusercontent.com/cortex-memory/cortex/main/install.sh | bash
source ~/.zshrc
```

**Requirements:** git, jq (both pre-installed on macOS)

## Usage

### Starting an AI Session

```bash
cd your-project
cx                  # instead of 'claude'
```

That's it. First run auto-initializes. Every run after that generates fresh context.

### Checking Status

```bash
cortex-status.sh    # View project memory status
```

Shows:
- Recent commits and activity
- Memory usage (tracked commits, sessions, storage)
- Current task (from PROJECT_STATE.md or features.json)
- Health status
- JSON output available with `--json` flag

## What Your AI Sees

When you run `cx`, Cortex generates `SESSION_CONTEXT.md`:

```markdown
# SESSION_CONTEXT.md (auto-generated by Cortex)
# Session #42 | Project: my-saas-app

## SINCE LAST SESSION
a1b2c3d feat(auth): add Google OAuth provider
e4f5g6h test(auth): add login flow E2E tests

## RECENT COMMITS (24h)
- a1b2c3d feat(auth): add Google OAuth provider [+145/-2]
- e4f5g6h test(auth): add login flow E2E tests [+89/-0]
- f7g8h9i fix(auth): handle OAuth callback redirect [+12/-4]

## CURRENT TASK
Feature F006: Metadata Writer — Status: pending

## GIT STATUS
Branch: feature/auth | Uncommitted: 2 files
Last: f7g8h9i fix(auth): handle OAuth callback redirect (35 minutes ago)

## WARNINGS
None.
```

Your AI assistant reads this automatically. No copy-pasting. No re-explaining.

## How It Works

Three components. ~400 lines of bash. Zero external dependencies.

```
┌─────────────────────────────────────────────────────────┐
│                    HOW CORTEX WORKS                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. GIT HOOK (post-commit)                              │
│     Captures commit metadata to .cortex/commits.jsonl   │
│     Runs in <10ms. Never blocks git.                    │
│                                                         │
│  2. CONTEXT GENERATOR (cortex-context.sh)               │
│     Reads git data → writes SESSION_CONTEXT.md          │
│     Runs in <100ms. ~500 tokens of context.             │
│                                                         │
│  3. SESSION MANAGER (cx command)                        │
│     Generate context → launch Claude → log session      │
│     Auto-initializes on first run per project.          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### Storage

All data lives in `.cortex/` (auto-added to `.gitignore`):

```
.cortex/
├── commits.jsonl       # Commit metadata (one JSON line per commit)
├── sessions.jsonl      # Session start/end timestamps
└── summaries/          # Optional LLM-generated summaries
    └── latest.md
```

## Configuration

Edit `~/.cortex/config`:

```ini
# LLM provider for richer summaries (optional)
# Options: none | ollama | openrouter | gemini
llm_provider=none
llm_model=qwen2.5-coder:7b

# Uncomment to use cloud providers
# openrouter_key=sk-or-...
# gemini_key=AI...
```

Enable LLM enrichment for AI-powered commit summaries:

```bash
export CORTEX_ENRICH=1
```

## Works With

| Tool | Status | How |
|------|--------|-----|
| Claude Code | Works | Reads SESSION_CONTEXT.md automatically |
| Cursor | Works | Add SESSION_CONTEXT.md to .cursorrules |
| Aider | Works | Reads markdown files from project root |
| Continue.dev | Works | Configure in .continue/ |
| Copilot | Works | Reference in prompts |
| Any AI tool | Works | Any tool that reads project files |

## Benchmarks

| Operation | Time | Impact |
|-----------|------|--------|
| Post-commit hook | <10ms | Never blocks git |
| Context generation | <100ms | Instant on `cx` |
| Memory usage | <5MB | Negligible |
| Context size | ~500 tokens | <1% of context window |

## Health Check

```bash
~/.cortex/bin/cortex-doctor.sh
```

```
Cortex Doctor v0.1.0
────────────────────────
✓ git 2.43.0
✓ jq 1.7.1
✓ ~/.cortex/ exists
✓ Scripts executable
✓ cx alias configured
✓ .cortex/ initialized
✓ Git hook installed (v1)
✓ commits.jsonl valid (42 entries)
✓ sessions.jsonl valid (12 sessions)
○ Ollama: not configured (optional)

Health: GOOD (9/9 required checks passed)
```

## FAQ

**Does it slow down git?**
No. The post-commit hook runs in <10ms and never blocks. It uses `exit 0` to ensure git is never affected.

**Does it need Ollama/LLMs?**
No. LLM enrichment is 100% optional. Core functionality works with just git + jq.

**Does it work in CI/CD?**
Yes. The hook auto-detects CI environments (GitHub Actions, GitLab CI, Jenkins, Buildkite, CircleCI, Travis) and skips itself.

**Does it work with teams?**
Yes. `.cortex/` is local-only (auto-added to .gitignore). Each developer has their own memory. No merge conflicts.

**How do I uninstall?**
```bash
./install.sh --uninstall
# or manually: rm -rf ~/.cortex && remove 'cx' alias from shell rc
```

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

## License

[MIT](LICENSE) — free for personal and commercial use.

---

<div align="center">
<i>Never re-explain your project to an AI again.</i>
</div>
